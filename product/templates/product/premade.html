{% extends 'home_app/base.html' %}
{% load static %}
{% load custom_filter %}
{% block content %}
{% include 'home_app/header.html' %}


<main>

    <!--? slider Area Start-->
    <div class="slider-area ">
        <div class="slider-active">
            <div class="single-slider hero-overly2  slider-height2 d-flex align-items-center slider-bg2">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-6 col-lg-8 col-md-8">
                            <div class="hero__caption hero__caption2">
                                <h1 data-animation="fadeInUp" data-delay=".4s">Build A Box</h1>
                                <nav aria-label="breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                                        <li class="breadcrumb-item"><a href="/products">Build A Box</a></li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- slider Area End-->

    <!--? Properties Start -->
    <section class="properties new-arrival fix">
        <div class="container-fluid">
            <!-- Section tittle -->
            <div class="row justify-content-center">
                <div class="col-xl-7 col-lg-8 col-md-10">
                    <div class="section-tittle mb-60 text-center wow fadeInUp" data-wow-duration="1s"
                        data-wow-delay=".2s">
                        <h2>Purchase Our Pre-Packed Gift Boxes</h2>
                        <P>Quick, hassle-free, ready-to-ship gift boxes for you..</P>
                        <h3>Select the box below!</h3>
                    </div>
                </div>
            </div>


            <!-- step wizard start-->
            <div class="container-fluid px-1 py-5 mx-auto">
                <div class="row d-flex justify-content-center">
                    <div class="container">
                        <ul id="progressbar" class="text-center">
                            <li class="active step0" onclick="instep(1,0)" id="step1">Choose your Box</li>
                            <li class="step0 " id="step2" onclick="instep(2,0)">Choose your Item</li>
                            <li class="step0" id="step3" onclick="instep(3,0)">Choose your Card</li>
                            <li class="step0" id="step4">Done</li>

                        </ul>

                        <div class="card1 b-0 show">
                            <h2 class="center" style="text-align: center;"> Choose a Box</h2>
                            <div class="row justify-content-center">

                                <!-- <p>Quick, hassle-free, ready-to-ship gift boxes for you..</p>
                                <h3>Select the box below!</h3> -->

                                <!-- select the box -->
                                <div class="row card-group mb-5" style="margin-top: 20px;">

                                    {% for box in boxes %}
                                    <div class=" col-lg-3 col-md-4 col-sm-6 ">
                                        <div class="single-new-arrival mb-50 text-center card shadow bg-white rounded">
                                            <div class="popular-img">
                                                <img style="height: 185px;" class="img-thumbnail"
                                                    src="{{box.boxattribute_set.first.imageURL}}" alt="">
                                            </div>
                                            <div class="popular-caption">
                                                <h3><a href="#">{{box.title}}</a></h3>
                                                <!-- <span>${{product.productattribute_set.first.price}}</span> -->

                                                <div class="add_to_cart">
                                                    <button type="button" onclick="step2('{{box.id}}')" class="btn"
                                                        data-target="#boxModal-{{box.id}}">
                                                        {{box.title}}</button>
                                                    <!-- <a href="#" class="like_us"> <i class="ti-heart"></i> </a> -->
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- product details modal -->

                                    <!-- <div class="modal fade" id="boxModal-{{box.id}}" tabindex="-1" role="dialog"
                                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title" id="exampleModalCenterTitle">
                                                        {{product.title}}</h3>
                                                    <button style="font-size: 3rem;" type="button" class="close"
                                                        data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body"> -->

                                    <!--? Single Product Area Start-->
                                    <!-- <div class="product_image_area section-padding40">
                                                        <div class="container">
                                                            <div class="row s_product_inner">
                                                                <div class="col-lg-5">
                                                                    <div class="product_slider_img">
                                                                        <div id="vertical">
                                                                            <div
                                                                                data-thumb="{{box.boxattribute_set.first.imageURL}}">
                                                                                <img src="{{box.boxattribute_set.first.imageURL}}"
                                                                                    class="w-100 img-fluid img-thumbnail">
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 offset-lg-1">
                                                                    <div class="s_product_text">
                                                                        <button
                                                                            style="background-color: rgb(182, 126, 54);"
                                                                            class="btn btn-outline-dark">variation</button>
                                                                        <hr>
                                                                        <h2>${{box.boxattribute_set.first.price}}
                                                                        </h2>
                                                                        <ul class="list"> -->
                                    <!-- <li>
                                                                                <a class="active" href="#">
                                                                                    <span>Category</span> :
                                                                                    {{box.category}}</a>
                                                                            </li> -->
                                    <!-- <li>
                                                                                <a href="#"> <span>Availibility</span>

                                                                                    {% ifequal box.availability_status True %}
                                                                                    : In Stock
                                                                                    {% else %}
                                                                                    : Out of Stock
                                                                                    {% endifequal %}
                                                                                </a>
                                                                            </li>
                                                                        </ul>

                                                                        <p>
                                                                            {{box.description}}
                                                                        </p>
                                                                        <div class="card_area">
                                                                            <div class="product_count d-inline-block">
                                                                                <span class="inumber-decrement"> <i
                                                                                        class="ti-minus"></i></span>
                                                                                <input class="input-number" type="text"
                                                                                    value="1" min="0" max="10">
                                                                                <span class="number-increment"> <i
                                                                                        class="ti-plus"></i></span>
                                                                            </div>
                                                                            <div class="add_to_cart">
                                                                                <a href="#" class="btn">Add to Box</a>
                                                                                <a href="#" class="like_us"> <i
                                                                                        class="ti-heart"></i> </a>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> -->
                                    <!-- Single Product Area End-->

                                    <!-- </div>

                                            </div>
                                        </div>
                                    </div> -->

                                    <!-- product details modal end -->


                                    {% endfor %}

                                </div>

                                <!-- select the box end -->


                            </div>
                            <div class="row d-flex justify-content-center">

                                <div class="circle">
                                    <div id="next1" onclick="instep(2,1)">Next</div>
                                </div>
                            </div>
                        </div>


                        <div class="card1 b-0">
                            <div class="fa fa-long-arrow-left prev"> </div>
                            <div class="row justify-content-center">
                                <h2>Purchase Our Pre-Packed Gift Boxes</h2>

                                <!-- select the box -->
                                <div class="row card-group">

                                    {% for product in products %}
                                    <div class="col-lg-3 col-md-4 col-sm-6 ">
                                        <div class="single-new-arrival mb-50 text-center card shadow bg-white rounded">
                                            <div class="popular-img">
                                                <img style="height: 185px;" class="img-thumbnail"
                                                    src="{{product.productattribute_set.first.imageURL}}" alt="">
                                            </div>
                                            <div class="popular-caption">
                                                <h3><a href="product_details.html">{{product.title}}</a></h3>
                                                <span>${{product.productattribute_set.first.price}}</span>

                                                <div class="add_to_cart">
                                                    <button type="button" data-toggle="modal" class="btn"
                                                        data-target="#productModal-{{product.id}}">
                                                        add to cart</button>
                                                    <a href="#" class="like_us"> <i class="ti-heart"></i> </a>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- product details modal -->

                                    <div class="modal fade" id="productModal-{{product.id}}" tabindex="-1" role="dialog"
                                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title" id="exampleModalCenterTitle">
                                                        {{product.title}}</h3>
                                                    <button style="font-size: 3rem;" type="button" class="close"
                                                        data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">

                                                    <!--? Single Product Area Start-->
                                                    <div class="product_image_area section-padding40">
                                                        <div class="container">
                                                            <div class="row s_product_inner">
                                                                <div class="col-lg-5">
                                                                    <div class="product_slider_img">
                                                                        <div id="vertical">
                                                                            <div
                                                                                data-thumb="{{product.productattribute_set.first.imageURL}}">
                                                                                <img src="{{product.productattribute_set.first.imageURL}}"
                                                                                    class="w-100 img-fluid img-thumbnail">
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 offset-lg-1">
                                                                    <div class="s_product_text">
                                                                        <button
                                                                            style="background-color: rgb(182, 126, 54);"
                                                                            class="btn btn-outline-dark">variation</button>
                                                                        <hr>
                                                                        <h2>${{product.productattribute_set.first.price}}
                                                                        </h2>
                                                                        <ul class="list">
                                                                            <li>
                                                                                <a class="active" href="#">
                                                                                    <span>Category</span> :
                                                                                    {{product.category}}</a>
                                                                            </li>
                                                                            <li>
                                                                                <a href="#"> <span>Availibility</span>

                                                                                    {% ifequal product.status True %}
                                                                                    : In Stock
                                                                                    {% else %}
                                                                                    : Out of Stock
                                                                                    {% endifequal %}
                                                                                </a>
                                                                            </li>
                                                                        </ul>

                                                                        <p>
                                                                            {{product.description}}
                                                                        </p>
                                                                        <div class="card_area">
                                                                            <div class="product_count d-inline-block">
                                                                                <span class="inumber-decrement"> <i
                                                                                        class="ti-minus"></i></span>
                                                                                <input class="input-number"
                                                                                    id="product-{{product.id}}"
                                                                                    type="text" value="1" min="0"
                                                                                    max="10">
                                                                                <span class="number-increment"> <i
                                                                                        class="ti-plus"></i></span>
                                                                            </div>
                                                                            <div class="add_to_cart">

                                                                                <a href="#" class="btn"
                                                                                    onclick="step3('{{product.title}}','{{product.id}}',document.getElementById('product-{{product.id}}').value,
                                                                                                    '{{product.productattribute_set.first.imageURL}}','{{product.productattribute_set.first.price}}')"
                                                                                    data-dismiss="modal">add to
                                                                                    cart</a>
                                                                                <a href="#" class="like_us"> <i
                                                                                        class="ti-heart"></i> </a>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Single Product Area End-->

                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- product details modal end -->
                                    {% endfor %}

                                </div>
                                <!-- Button -->
                                <div class="row justify-content-center">
                                    <div class="room-btn">
                                        <a href="#" class="border-btn">Discover More</a>
                                    </div>
                                </div>
                                <!-- select the box end -->

                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="circle">

                                    <div id="next2" onclick="instep(3,1)">Next</div>
                                </div>
                            </div>
                        </div>


                        <div class="card1 b-0">
                            <div class="fa fa-long-arrow-left prev"> </div>
                            <div class="row justify-content-center">

                                <!-- select the box -->
                                <div class="row card-group">

                                    {% for card in cards %}
                                    <div class="col-lg-3 col-md-4 col-sm-6 ">
                                        <div class="single-new-arrival mb-50 text-center card shadow bg-white rounded">
                                            <div class="popular-img">
                                                <img style="height: 185px;" class="img-thumbnail"
                                                    src="{{card.imageURL}}" alt="">
                                            </div>
                                            <div class="popular-caption">
                                                <h3><a href="#">{{product.title}}</a></h3>
                                                <span>${{product.productattribute_set.first.price}}</span>

                                                <div class="add_to_cart">
                                                    <button type="button" data-toggle="modal" class="btn"
                                                        data-target="#cardModal-{{card.id}}">
                                                        add to cart</button>
                                                    <a href="#" class="like_us"> <i class="ti-heart"></i> </a>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- product details modal -->

                                    <div class="modal fade" id="cardModal-{{card.id}}" tabindex="-1" role="dialog"
                                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h3 class="modal-title" id="exampleModalCenterTitle">
                                                        {{card.title}}</h3>
                                                    <button style="font-size: 3rem;" type="button" class="close"
                                                        data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">

                                                    <!--? Single Product Area Start-->
                                                    <div class="product_image_area section-padding40">
                                                        <div class="container">
                                                            <div class="row s_product_inner">
                                                                <div class="col-lg-5">
                                                                    <div class="product_slider_img">
                                                                        <div id="vertical">
                                                                            <div data-thumb="{{card.imageURL}}">
                                                                                <img src="{{card.imageURL}}"
                                                                                    class="w-100 img-fluid img-thumbnail">
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6 offset-lg-1">
                                                                    <div class="s_product_text">
                                                                        <button
                                                                            style="background-color: rgb(182, 126, 54);"
                                                                            class="btn btn-outline-dark">variation</button>
                                                                        <hr>

                                                                        <ul class="list">
                                                                            <li>
                                                                                <a class="active" href="#">
                                                                                    <span>Category</span> :
                                                                                    {{product.category}}</a>
                                                                            </li>
                                                                            <li>
                                                                                <a href="#"> <span>Availibility</span>

                                                                                    {% ifequal card.availability_status True %}
                                                                                   
                                                                                    : In Stock
                                                                                    {% else %}
                                                                                    : Out of Stock
                                                                                    {% endifequal %}
                                                                                </a>
                                                                            </li>
                                                                        </ul>

                                                                        <p>
                                                                            {{card.description}}
                                                                        </p>
                                                                        <div class="card_area">
                                                                            <div class="product_count d-inline-block">
                                                                                <span class="inumber-decrement"> <i
                                                                                        class="ti-minus"></i></span>
                                                                                <input class="input-number" type="text"
                                                                                    value="1" min="0" max="10">
                                                                                <span class="number-increment"> <i
                                                                                        class="ti-plus"></i></span>
                                                                            </div>
                                                                            <div class="add_to_cart">
                                                                                <a href="#" class="btn btn-responsive" data-dismiss="modal">add to box</a>
                                                                                <a href="#" class="like_us"> <i
                                                                                        class="ti-heart"></i> </a>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Single Product Area End-->

                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- product details modal end -->
                                    {% endfor %}

                                </div>
                                <!-- Button -->
                                <div class="row justify-content-center">
                                    <div class="room-btn">
                                        <a href="#" class="border-btn">Discover More</a>
                                    </div>
                                </div>
                                <!-- select the box end -->

                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="circle">
                                    <div id="next2" onclick="instep(4,1)">Next</div>
                                </div>
                            </div>
                        </div>


                        <div class="card1 b-0">
                            <div class=" justify-content-center text-center">
                                <div class="confirm">



                                    <!--================Cart Area =================-->
                                    <section class="cart_area section-padding40">
                                        <div class="container">
                                            <div class="cart_inner">
                                                <div class="table-responsive">
                                                    <table id ="checkout_table" class="table">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col"><b>Product</b> </th>
                                                                <th scope="col"><b>Price</b></th>
                                                                <th scope="col"><b>Quantity</b></th>
                                                                <th scope="col"><b>Total</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                           
                                                            {% if 'cart' in request.session %}
                                                            {% for val in request.session.cart %}
                                                          
                                                          
                                                            <tr>
                                                                <td>
                                                                    <div class="media">
                                                                        <div class="d-flex">

                                                                            <img src="{{request.session.cart|get_item:val|get_item:'image_url'}}"
                                                                                alt="" class="img-fluid img-thumbnail"/>
                                                                        </div>
                                                                        <div class="media-body">
                                                                            <p> {{request.session.cart|get_item:val|get_item:'title'}}
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td>
                                                                    <h5>${{request.session.cart|get_item:val|get_item:'price'}}</h5>
                                                                </td>
                                                                <td>
                                                                    <div class="product_count">
                                                                       <!-- <span class="input-number-decrement"> <i
                                                                                class="ti-minus"></i></span>
                                                                        <input class="input-number" type="text"
                                                                            value="1" min="0" max="10">
                                                                        <span class="input-number-increment"> <i
                                                                                class="ti-plus"></i></span>-->
                                                                                {{request.session.cart|get_item:val|get_item:'quantity'}}


                                                                    </div>
                                                                </td>
                                                                <td>
                                                                    <h5>${{request.session.cart|get_item:val|get_item:'total_item_price'}}</h5>
                                                                </td>
                                                            </tr>
                                                            {%endfor%}
                                                            {%endif%}
                                                     
                                                            <tr class="bottom_button">
                                                                <td>
                                                                    <a class="btn" href="#">Save Gift Box</a>
                                                                </td>
                                                                <td></td>
                                                                <td></td>
                                                                <td>
                                                                    <div class="cupon_text float-right">
                                                                        <a class="btn" href="#">Make Changes</a>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            
                                                            <tr>
                                                                <td></td>
                                                                <td></td>
                                                                <td>
                                                                   <h5> <b>Subtotal</b></h5>
                                                                </td>
                                                                <td>
                                                                    <h5>${{request.session.product_total_price}}</h5>
                                                                </td>
                                                            </tr>
                                                          
                                                        </tbody>
                                                    </table>

                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <!--================End Cart Area =================-->



                                </div>
                            </div>
                           
                        </div>

                    </div>
                </div>
            </div>
            <!-- step wizard end -->



        </div>
    </section>
    <!-- Properties End -->

    <!--? New Arrival End -->
    <!-- Popular Locations End -->

    <!--? Services Area Start -->
    <div class="categories-area section-padding40 gray-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".2s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services1.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Fast & Free Delivery</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".2s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services2.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Secure Payment</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".4s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services3.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Money Back Guarantee</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".5s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services4.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Online Support</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--? Services Area End -->
</main>

{% endblock content %}