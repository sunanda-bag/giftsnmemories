{% extends 'base.html' %}
{% load static %}
{% block css %}
<style>
    .btn {
        border-radius: 10px;
    }

    section {
        font-size: 1.4rem;
    }
</style>
<link rel="stylesheet" href="build-a-box.css">
{% endblock css %}
{% block content %}
{% include 'header.html' %}


<main>

    <!--? slider Area Start-->
    <div class="slider-area ">
        <div class="slider-active">
            <div class="single-slider hero-overly2  slider-height2 d-flex align-items-center slider-bg2">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-6 col-lg-8 col-md-8">
                            <div class="hero__caption hero__caption2">
                                <h1 data-animation="fadeInUp" data-delay=".4s">Build A Box</h1>
                                <nav aria-label="breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                                        <li class="breadcrumb-item"><a href="/product/build-a-box">Build A Box</a></li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- slider Area End-->

    <!--? Properties Start -->
    <section class="properties new-arrival fix">
        <div class="container-fluid">
            <!-- Section tittle -->
            <div class="row justify-content-center">
                <div class="col-xl-7 col-lg-8 col-md-10">
                    <div class="section-tittle mb-60 text-center wow fadeInUp" data-wow-duration="1s"
                        data-wow-delay=".2s">
                        <h2>Purchase Our Pre-Packed Gift Boxes</h2>
                        <P>Quick, hassle-free, ready-to-ship gift boxes for you..</P>
                        <h3>Select the box below!</h3>
                    </div>
                </div>
            </div>


            <!-- step wizard start-->
            <div class="container-fluid px-1 py-5 mx-auto">
                <div class="row d-flex justify-content-center">
                    <div class="col-xl-9 col-lg-11 col-md-10">
                        <ul id="progressbar" class="text-center">
                            <li class="active step0" id="step1">Choose your Box</li>
                            <li class="step0" id="step2">Choose your Item</li>
                            <li class="step0" id="step3">Choose your Card</li>
                            <li class="step0" id="step4">Done</li>
                        </ul>

                        <div class="card1 b-0 show">
                            <div class="row justify-content-center">
                                <div class="col-lg-10 col-md-11">

                                    <div class="row card-group">
                                        {% for box in boxes %}
                                        <div class="col-lg-3 col-md-4 col-sm-6 ">
                                            <div class="card rounded my-5" style="width: 22rem;">
                                                <a href="" data-target="#exampleModalCenter-{{box.id}}"
                                                    data-toggle="modal"><img
                                                        class="card-img-top img-fluid img-thumbnail img-rounded"
                                                        src="{{box.image.url}}" alt="Card image cap"></a>
                                                <div class="card-body">
                                                    <h5 class="card-title text-center text-uppercase">{{box.boxsize}}
                                                    </h5>
                                                    <p class="card-text text-center text-uppercase">{{box.name}}</p>


                                                    <form action="{% url 'order:add-box' %}" method="POST" class=" ps-0">{% csrf_token %}
                                                        <input class="box-id" type="hidden" name="box-id" value="{{box.id}}">
                                                        <!-- Button trigger modal -->
                                                        <button type="submit" class="btn py-3 add-box" name="add-box-btn"
                                                            onclick="validate1(1)" value="{{box.id}}">Add Box</button>
                                                    </form>

                                                </div>

                                                <!-- modal starts -->
                                                <!-- Modal -->
                                                <div class="modal fade" id="exampleModalCenter-{{box.id}}" tabindex="-1"
                                                    role="dialog" aria-labelledby="exampleModalCenterTitle"
                                                    aria-hidden="true">
                                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                                        <div class="modal-content">

                                                            <div class="modal-body">
                                                                <!--? Single Product Area Start-->
                                                                <div class="product_image_area section-padding40">
                                                                    <div class="container">
                                                                        <h1 class="text-uppercase pb-4">{{box.name}} -
                                                                            {{box.boxsize}} series</h1>
                                                                        <div class="row s_product_inner">

                                                                            <div class="col-lg-5">
                                                                                <div class="product_slider_img">
                                                                                    <div id="vertical">
                                                                                        <div
                                                                                            data-thumb="{{box.image.url}}">
                                                                                            <img src="{{box.image.url}}"
                                                                                                class="w-100 img-fluid img-thumbnail">
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-6 offset-lg-1">
                                                                                <div class="s_product_text">

                                                                                    <hr>
                                                                                    <h2>${{box.price}}
                                                                                    </h2>
                                                                                    <ul class="list">
                                                                                        <li>
                                                                                            <a class="active" href="#">
                                                                                                <span>Category</span> :
                                                                                                {{box.boxsize}}</a>
                                                                                        </li>
                                                                                        <li>
                                                                                            <a href="#">
                                                                                                <span>Availibility</span>

                                                                                                In Stock
                                                                                            </a>
                                                                                        </li>
                                                                                    </ul>

                                                                                    <p>
                                                                                        {{box.description}}
                                                                                    </p>
                                                                                    <div class="card_area">

                                                                                        <form
                                                                                            action="{% url 'order:add-box' %}"
                                                                                            method="POST" class=" ps-0">
                                                                                            {% csrf_token %}


                                                                                            <input type="hidden"
                                                                                                name="box-id"
                                                                                                value="{{box.id}}">
                                                                                            <!-- Button trigger modal -->
                                                                                            <button type="submit"
                                                                                                class="btn py-3 add-box"
                                                                                                name="add-box-btn"
                                                                                                value="{{box.id}}">Add
                                                                                                Box</button>

                                                                                        </form>

                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Single Product Area End-->
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- modal end -->


                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="circle">
                                    <div class="fa fa-long-arrow-right next" id="next1" onclick="validate1(0)">Next
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="card1 b-0  ">
                            <div class="fa fa-long-arrow-left prev">Prev </div>
                            <div class="row justify-content-center">
                                <!-- <h2>Purchase Our Pre-Packed Gift Boxes</h2> -->

                                <!-- select the box -->
                                <div class="row card-group">
                                    {% for product in products %}
                                    <div class="col-lg-3 col-md-4 col-sm-6 ">
                                        <div class="card rounded my-5" style="width: 23rem;">
                                            <a href="" data-target="#GiftItemModal-{{product.id}}"
                                                data-toggle="modal"><img style="height: 200px;"
                                                    class="card-img-top img-fluid img-thumbnail img-rounded"
                                                    src="{{product.image.url}}" alt="Card image cap"></a>
                                            <div class="card-body">
                                                <h5 class="card-title text-center text-uppercase">{{product.category}}
                                                </h5>
                                                <p class="card-text text-center text-uppercase">{{product.name}}</p>

                                                <form action="{% url 'order:add-box' %}" method="POST" class=" ps-0">{% csrf_token %}
                                                
                                                    <input type="hidden" name="box-id" value="{{product.id}}">
                                                    <!-- Button trigger modal -->
                                                    <button type="submit" class="btn py-3 add-product" name="add-product"
                                                        value="{{product.id}}">Add Box</button>
                                                </form>

                                            </div>

                                            <!-- modal starts -->
                                            <!-- Modal -->
                                            <div class="modal fade" id="GiftItemModal-{{product.id}}" tabindex="-1"
                                                role="dialog" aria-labelledby="GiftItemModalTitle" aria-hidden="true">
                                                <div class="modal-dialog modal-dialog-centered" role="document">
                                                    <div class="modal-content">

                                                        <div class="modal-body">
                                                            <!--? Single Product Area Start-->
                                                            <div class="product_image_area section-padding40">
                                                                <div class="container">

                                                                    <div class="row s_product_inner">
                                                                        <div class="col-lg-5">
                                                                            <div class="product_slider_img">
                                                                                <div id="vertical">
                                                                                    <div
                                                                                        data-thumb="{{product.image.url}}">
                                                                                        <img src="{{product.image.url}}"
                                                                                            class="w-100 img-fluid img-thumbnail">
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6 offset-lg-1">
                                                                            <div class="s_product_text">
                                                                                <!-- <button
                                                                                    style="background-color: rgb(182, 126, 54);"
                                                                                    class="btn btn-outline-dark py-3">variation</button> -->
                                                                                <hr>
                                                                                <h2>${{product.price}}
                                                                                </h2>
                                                                                <ul class="list">
                                                                                    <li>
                                                                                        <a class="active" href="#">
                                                                                            <span>Category</span> :
                                                                                            {{product.category}}</a>
                                                                                    </li>
                                                                                    <li>
                                                                                        <a href="#">
                                                                                            <span>Availibility</span>

                                                                                            In Stock
                                                                                        </a>
                                                                                    </li>
                                                                                </ul>

                                                                                <p>
                                                                                    {{product.description}}
                                                                                </p>
                                                                                <div class="card_area">
                                                                                    <div
                                                                                        class="product_count d-inline-block">
                                                                                        <span class="inumber-decrement">
                                                                                            <i
                                                                                                class="ti-minus"></i></span>
                                                                                        <input class="input-number"
                                                                                            id="product-{{product.id}}"
                                                                                            type="text" value="1"
                                                                                            min="0" max="10">
                                                                                        <span class="number-increment">
                                                                                            <i
                                                                                                class="ti-plus"></i></span>
                                                                                    </div>
                                                                                    <form
                                                                                        action="{% url 'order:add-box' %}"
                                                                                        method="POST" class=" ps-0">
                                                                                        {% csrf_token %}


                                                                                        <input type="hidden"
                                                                                            name="box-id"
                                                                                            value="{{product.id}}">
                                                                                        <!-- Button trigger modal -->
                                                                                        <button type="submit"
                                                                                            class="btn py-3 add-product"
                                                                                            name="add-product"
                                                                                            value="{{product.id}}">Add
                                                                                            Box</button>

                                                                                    </form>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Single Product Area End-->
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>



                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                <!-- Button -->
                                <!-- <div class="row justify-content-center">
                                    <div class="room-btn">
                                        <a href="#" class="border-btn">Discover More</a>
                                    </div>
                                </div> -->
                                <!-- select the box end -->

                            </div>
                            <div class="row d-flex justify-content-center ">
                                <div class="circle">

                                    <div class="fa fa-long-arrow-right next" id="next2" onclick="validate2(0)">Next
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="row d-flex justify-content-left">
                                <div class="circle">

                                    <div class="fa fa-long-arrow-right prev" onclick="validate2(0)">Prev</div>
                                </div>
                            </div> -->
                        </div>


                        <div class="card1 b-0 ">
                            <!-- <div class="fa fa-long-arrow-left prev">Prev </div> -->
                            <div class="row justify-content-center">

                                <!-- select the box -->
                                <div class="row card-group">
                                    {% for card in cards %}
                                    <div class="col-lg-3 col-md-4 col-sm-6 ">
                                        <div class="card rounded my-5" style="width: 23rem;">
                                            <a href="" data-target="#giftCard-{{card.id}}" data-toggle="modal"><img
                                                    class="card-img-top img-fluid img-thumbnail img-rounded"
                                                    src="{{card.image.url}}" alt="Card image cap"></a>
                                            <div class="card-body">
                                                <h5 class="card-title text-center text-uppercase">{{card.name}}
                                                </h5>
                                                <p class="card-text text-center text-uppercase">{{card.name}}</p>

                                                <!-- Button trigger modal -->
                                                <button type="submit" class="btn py-3" name="add-card"
                                                    data-target="#giftCard-{{card.id}}" data-toggle="modal"
                                                    value="{{card.id}}">Add Card</button>

                                            </div>

                                            <!-- modal starts -->
                                            <!-- Modal -->
                                            <div class="modal fade" id="giftCard-{{card.id}}" tabindex="-1"
                                                role="dialog" aria-labelledby="giftCardTitle" aria-hidden="true">
                                                <div class="modal-dialog modal-dialog-centered" role="document">
                                                    <div class="modal-content">

                                                        <div class="modal-body">
                                                            <!--? Single Product Area Start-->
                                                            <div class="product_image_area section-padding40">
                                                                <div class="container">

                                                                    <div class="row s_product_inner">
                                                                        <div class="col-lg-5">
                                                                            <div class="product_slider_img">
                                                                                <div id="vertical">
                                                                                    <div
                                                                                        data-thumb="{{card.image.url}}">
                                                                                        <img src="{{card.image.url}}"
                                                                                            class="w-100 img-fluid img-thumbnail">
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6 offset-lg-1">
                                                                            <div class="s_product_text">

                                                                                <form
                                                                                    action="{% url 'order:add-card-to-box' %}"
                                                                                    method="POST">{% csrf_token %}

                                                                                    <div class="form-group">
                                                                                        <label
                                                                                            for="recipient-name">Recipient
                                                                                            Name</label>
                                                                                        <input type="text"
                                                                                            id="recipient-name"
                                                                                            class="form-control"
                                                                                            name="recipient"
                                                                                            placeholder="Recipient name">
                                                                                    </div>
                                                                                    <div class="form-group">
                                                                                        <label for="sender-name">Sender
                                                                                            NAme</label>
                                                                                        <input type="text"
                                                                                            id="sender-name"
                                                                                            class="form-control"
                                                                                            name="sender"
                                                                                            placeholder="Sender name">
                                                                                    </div>
                                                                                    <div class="form-group">
                                                                                        <label
                                                                                            for="exampleFormControlTextarea1">Card
                                                                                            Content</label>
                                                                                        <textarea class="form-control"
                                                                                            name="   "
                                                                                            id="exampleFormControlTextarea1"
                                                                                            rows="3"></textarea>
                                                                                    </div>
                                                                                    <div class="form-group">
                                                                                        <label
                                                                                            for="exampleFormControlTextarea1">Back
                                                                                            Of Card
                                                                                        </label>
                                                                                        <textarea class="form-control"
                                                                                            name="bc_content"
                                                                                            id="exampleFormControlTextarea1"
                                                                                            rows="3"></textarea>
                                                                                    </div>
                                                                                    <input type="hidden" name="card-id"
                                                                                        value="{{card.id}}">
                                                                                    <button type="submit"
                                                                                        class="btn py-3"
                                                                                        name="add-card-data"
                                                                                        value="{{card.id}}">Add to
                                                                                        Box</button>
                                                                                </form>


                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Single Product Area End-->
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <!-- modal end -->

                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                <!-- Button -->
                                <!-- <div class="row justify-content-center">
                                    <div class="room-btn">
                                        <a href="#" class="border-btn">Discover More</a>
                                    </div>
                                </div> -->
                                <!-- select the box end -->

                            </div>
                            <div class="row d-flex justify-content-center">
                                <div class="circle">
                                    <div class="fa fa-long-arrow-right next" id="next3" onclick="validate3(0)">Next
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="card1 b-0 ">
                            <!-- <div class="fa fa-long-arrow-left prev">Prev </div> -->
                            <div class="row d-flex justify-content-center text-center">
                                <div class="col-lg-10">
                                    <div class="order-box ">
                                        <div class="card_z pb-5">
                                            <div class="row">
                                                <div class="col-md-8 cart">
                                                    <div class="title">
                                                        <div class="row">
                                                            <div class="col">
                                                                <h4><b>Shopping Cart</b></h4>
                                                            </div>
                                                            <div class="col align-self-center text-right text-muted">
                                                                {{gift_count}}
                                                                items</div>
                                                        </div>
                                                    </div>
                                                    <!-- box selected  -->
                                                    <div class="row border-top border-bottom pb-5 pt-3">
                                                        <div class="row main align-items-center">
                                                            <div class="col-2"><img class="img-fluid img-thumbnail"
                                                                    src="{{items.box_type.gift_box.image.url}}"></div>
                                                            <div class="col">
                                                                <div class="row text-muted text-uppercase">
                                                                    {{items.box_type.gift_box.boxsize.size}}</div>
                                                                <div class="row">{{items.box_type.gift_box.name}}</div>
                                                            </div>
                                                            <div class="col"><a href="#"
                                                                    class="border">{{items.box_type.gift_box.size}}</a>
                                                            </div>
                                                            <div class="col">$ {{items.box_type.gift_box.price}} <span
                                                                    class="close">&#10005;</span></div>
                                                        </div>
                                                    </div>

                                                    {% for gift_item in items.gift_items.all %}
                                                    <div class="row border-top border-bottom pb-5 pt-3">
                                                        <div class="row main align-items-center">
                                                            <div class="col-2"><img class="img-fluid img-thumbnail"
                                                                    src="{{gift_item.product.image1.url}}"></div>
                                                            <div class="col">
                                                                <div class="row text-muted text-uppercase">
                                                                    {{gift_item.product.product.category}}</div>
                                                                <div class="row">{{gift_item.product.name}}</div>
                                                            </div>
                                                            <div class="col"> <a href="#">-</a><a href="#"
                                                                    class="border">{{gift_item.product.product.quantity}}</a><a
                                                                    href="#">+</a> </div>
                                                            <div class="col">$ {{gift_item.product.price}}
                                                                <form action="" method="post">{% csrf_token %}
                                                                    
                                                                    <span class="close">&#10005; </span>
                                                                   
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endfor %}

                                                    <!-- card selected  -->
                                                    <div class="row border-top border-bottom pb-5 pt-3">
                                                        <div class="row main align-items-center">

                                                            <div class="col-2"><img class="img-fluid img-thumbnail"
                                                                    src="{{items.card_type.card.image.url}}"></div>

                                                            <div class="col">
                                                                <div class="row text-muted text-uppercase">
                                                                    {{items.card_type.card}}</div>
                                                                <div class="row">{{items.card_type.card.name}}</div>
                                                            </div>

                                                            <div class="col"><a href="#" class="border"></a> </div>

                                                            <div class="col">$ 0.00

                                                            </div>
                                                            <div class="col">
                                                                <form action="{% url 'order:delete-card' %}"
                                                                    method="POST">{% csrf_token %}
                                                                    <input type="hidden" name="card-id"
                                                                        value="{{items.card_type.card.id}}">
                                                                    <span class="close">&#10005;</span>
                                                            </div>
                                                            </form>

                                                        </div>
                                                    </div>
                                                </div>


                                            </div>


                                            <form action="{% url 'order:order-checkout' %}" method="POST" class=" ps-0">
                                                {% csrf_token %}


                                                <!-- <input type="hidden" name="box-id" value="{{card.id}}"> -->
                                                <!-- Button trigger modal -->
                                                <button type="submit" class="btn py-3" name="add-box" value="">Save Gift
                                                    Box & Checkout</button>
                                            </form>

                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- <div class="row d-flex justify-content-center">
                                <div class="check"> <img src="https://i.imgur.com/g6KlBWR.gif" class="check-mark">
                                </div>
                            </div> -->
                        </div>

                    </div>
                </div>
                <!-- step wizard end -->



            </div>
    </section>
    <!-- Properties End -->

    <!--? New Arrival End -->
    <!-- Popular Locations End -->

    <!--? Services Area Start -->
    <div class="categories-area section-padding40 gray-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".2s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services1.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Fast & Free Delivery</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".2s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services2.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Secure Payment</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".4s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services3.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Money Back Guarantee</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".5s">
                        <div class="cat-icon">
                            <img src="{% static 'assets/img/icon/services4.svg' %}" alt="">
                        </div>
                        <div class="cat-cap">
                            <h5>Online Support</h5>
                            <p>Free delivery on all orders</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--? Services Area End -->
</main>

{% endblock content %}